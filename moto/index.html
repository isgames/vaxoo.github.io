<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Moto Stuntman - Granny games</title>
  </script><link rel="canonical" href="https://granny.games/moto-stuntman/"/>
  <link rel="shortcut icon" href="favicon.svg">
  <link rel="stylesheet" href="style.css">

  <script src="script.js"></script>

</head>

<body>
  <div id="unity-container" style="position: absolute; width: 100%; height: 100%; left: 0%; top: 0%;">
    <canvas id="unity-canvas" style="position: absolute;"></canvas>
    <div id="unity-loading-bar">
      <img src="Logo.png" id="logo"></img>
      <div class="wrapper">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
      </div>
      <div id="unity-progress-bar-empty">
        <div id="unity-progress-bar-full"></div>
      </div>
    </div>
    <div id="error-message"></div>

    <div id="orientation-blocker">
      <img id="orientation-image" src="TemplateData/HorisontalOnly.png">
    </div>

    <script>
      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var errorMessageElement = document.querySelector("#error-message");

      var orientationBlocker = document.querySelector("#orientation-blocker");
      var orientationImage = document.querySelector("#orientation-image");

      var buildUrl = "Build";
      var loaderUrl ="moto-stuntman.loader.js";
      var config = {
        dataUrl:"moto-stuntman.data.unityweb",
        frameworkUrl:"moto-stuntman.framework.js.unityweb",
        codeUrl:"moto-stuntman.wasm.unityweb",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "Itmium",
        productName: "Moto Stuntman",
        productVersion: "1.3.16"
      };

            window.getDeviceInfo = function () {
            let userAgent = navigator.userAgent;
            let tabletRegex = /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i;
            let mobRegex = /Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/;
            if (tabletRegex.test(userAgent) || isIpadOS()) {
                return "tablet";
            }

            if (mobRegex.test(userAgent)) {
                return "mobile";
            }

            tabletRegex.test(mobRegex.test(userAgent))
            console.log("Device type: desktop");
            return "desktop";
        };

        function isIpadOS() {
            return navigator.maxTouchPoints &&
                navigator.maxTouchPoints > 2 &&
                /MacIntel/.test(navigator.platform);
        }

      canvas.addEventListener("touchstart", () => { window.focus() });
      canvas.addEventListener("pointerdown", () => { window.focus() });

      const errorMessages = {
        "ru": "Ошибка. Попробуйте перезагрузить страницу.",
        "en": "Error. Try reloading the page."
      };

      const onProgress = (progress) => {
        progressBarFull.style.width = progress + '%';
      };
      const onError = () => {
        errorMessageElement.innerHTML = getErrorMessage(navigator?.language?.slice(0, 2));
        errorMessageElement.style.display = "block";
        loadingBar.style.display = "none";
      };
      const onFinish = () => {
            loadingBar.style.display = "none";
      };
      const getErrorMessage = (language) => {
        if (!language || !errorMessages.hasOwnProperty(language)){
          return errorMessages["en"];
        }

        return errorMessages[language];
      };

      var script = document.createElement("script");
      script.src = loaderUrl;
      script.onload = () => { loadGame(onFinish, onProgress, onError); };
      document.body.appendChild(script);
    </script>
</body>

</html>
<div class="floating" id="moreg" style="position:fixed; top: 30%; left: 0px; z-index: 10"><a target="_blank" href="https://sites.google.com/view/classroom66" title="unblocked games 66"><img
src="MoreGames.png" width="120" height="60"
style="cursor:pointer;" alt="unblocked games 66"></a></div>